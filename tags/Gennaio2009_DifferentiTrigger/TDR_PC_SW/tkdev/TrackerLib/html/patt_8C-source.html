<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title> AMS Software: Geometry Classes: CC/patt.C Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">CC</a></div>
<h1>patt.C</h1><a href="patt_8C.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#include "<a class="code" href="patt_8h.html">patt.h</a>"</span>
00002 
<a name="l00003"></a><a class="code" href="patt_8h.html#a0">00003</a> <a class="code" href="classPATT.html">PATT</a> patt;
00004 
00005 
<a name="l00006"></a><a class="code" href="classPATT.html#s0">00006</a> uinteger  PATT::_Npat;
<a name="l00007"></a><a class="code" href="classPATT.html#s1">00007</a> integer * <a class="code" href="classPATT.html#s1">PATT::_patconf</a>[trconst::maxlay];
<a name="l00008"></a><a class="code" href="classPATT.html#s2">00008</a> integer * PATT::_patpoints;
<a name="l00009"></a><a class="code" href="classPATT.html#s3">00009</a> integer * <a class="code" href="classPATT.html#s3">PATT::_patmiss</a>[trconst::maxlay];
<a name="l00010"></a><a class="code" href="classPATT.html#s4">00010</a> integer   <a class="code" href="classPATT.html#s4">PATT::_patd</a>[trconst::maxlay]; 
<a name="l00011"></a><a class="code" href="classPATT.html#s5">00011</a> integer * PATT::_patallow;
<a name="l00012"></a><a class="code" href="classPATT.html#s6">00012</a> integer * PATT::_patallow2;
00013 
<a name="l00014"></a><a class="code" href="classPATT.html#a0">00014</a> <a class="code" href="classPATT.html#a0">PATT::PATT</a>(){
00015 <span class="comment">//init();</span>
00016   <a class="code" href="classPATT.html#a2">init</a>(0);
00017 }
00018 
<a name="l00019"></a><a class="code" href="classPATT.html#a1">00019</a> <a class="code" href="classPATT.html#a1">PATT::~PATT</a>(){
00020   <a class="code" href="classPATT.html#a4">clear</a>();
00021 }
<a name="l00022"></a><a class="code" href="classPATT.html#a4">00022</a> <span class="keywordtype">void</span> <a class="code" href="classPATT.html#a4">PATT::clear</a>(){
00023   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0;ii&lt;trconst::maxlay;ii++){
00024     <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[ii]) <span class="keyword">delete</span> [] <a class="code" href="classPATT.html#s3">_patmiss</a>[ii];
00025     <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s1">_patconf</a>[ii]) <span class="keyword">delete</span> [] <a class="code" href="classPATT.html#s1">_patconf</a>[ii];
00026   }
00027 
00028   <span class="keywordflow">if</span>(_patpoints) <span class="keyword">delete</span> [] _patpoints;
00029   <span class="keywordflow">if</span>(_patallow) <span class="keyword">delete</span> [] _patallow;
00030   <span class="keywordflow">if</span>(_patallow) <span class="keyword">delete</span> [] _patallow2;
00031 }
00032 
<a name="l00033"></a><a class="code" href="classPATT.html#a2">00033</a> <span class="keywordtype">void</span> <a class="code" href="classPATT.html#a2">PATT::init</a>(<span class="keywordtype">int</span> atreffekypar){
00034   <span class="comment">// initialize patterns</span>
00035   <a class="code" href="classPATT.html#a3">InitPattern</a>();
00036   <span class="keywordtype">int</span> cpat;
00037   <span class="keywordflow">for</span>(cpat=0;cpat&lt;<a class="code" href="classPATT.html#e8">npat</a>();cpat++){
00038     <span class="comment">//ams02</span>
00039     <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat]&gt;4)<a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=1;
00040     <span class="keywordflow">else</span> <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00041     <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat]&gt;4)<a class="code" href="classPATT.html#s6">_patallow2</a>[cpat]=1;
00042     <span class="keywordflow">else</span> <a class="code" href="classPATT.html#s6">_patallow2</a>[cpat]=0;
00043   }
00044 
00045   <span class="comment">// Add disabling</span>
00046   <span class="comment">// wanted all 8, all 7  1 + 8</span>
00047   <span class="comment">// 6: no (23) (45) (67) 8*7/2-3 = 25</span>
00048   <span class="comment">// 5: 1 (2,3) (4,5) (6,7) 8  (8) </span>
00049   <span class="comment">// total of 42 patterns allowed</span>
00050   <span class="keywordflow">for</span>(cpat=0;cpat&lt;<a class="code" href="classPATT.html#e8">npat</a>();cpat++){
00051     <span class="comment">//ams02</span>
00052     <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat]==6){
00053       <span class="keywordflow">if</span>((<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==2 &amp;&amp; <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==3) || 
00054          (<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==3 &amp;&amp; <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==2))
00055         <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00056       <span class="keywordflow">if</span>((<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==4 &amp;&amp; <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==5) || 
00057          (<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==5 &amp;&amp; <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==4))
00058         <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00059       <span class="keywordflow">if</span>((<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==6 &amp;&amp; <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==7) || 
00060          (<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==7 &amp;&amp; <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==6))
00061         <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00062     }
00063     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat]==5 &amp;&amp; atreffekypar&lt;1){ <span class="comment">//for ANTI-calib to allow(if=1) any 5</span>
00064       <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-3][cpat]==1 || <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==1 || 
00065          <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==1)<a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00066       <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-3][cpat]==8 || <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2][cpat]==8 || 
00067          <a class="code" href="classPATT.html#s3">_patmiss</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1][cpat]==8)<a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00068       <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s5">_patallow</a>[cpat]){
00069         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat];k&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();k++){
00070           <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[k][cpat]==2){
00071             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> kk=<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat];kk&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();kk++){
00072               <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[kk][cpat]==3){
00073                 <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00074                 <span class="keywordflow">break</span>;
00075               }
00076             }   
00077           }
00078           <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[k][cpat]==4){
00079             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> kk=<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat];kk&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();kk++){
00080               <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[kk][cpat]==5){
00081                 <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00082                 <span class="keywordflow">break</span>;
00083               }
00084             }   
00085           }
00086           <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[k][cpat]==6){
00087             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> kk=<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat];kk&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();kk++){
00088               <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[kk][cpat]==7){
00089                 <a class="code" href="classPATT.html#s5">_patallow</a>[cpat]=0;
00090                 <span class="keywordflow">break</span>;
00091               }
00092             }   
00093           }
00094 
00095         }
00096       }
00097     }
00098   }
00099 }
00100 
00101 
00102 
00103 
<a name="l00104"></a><a class="code" href="classPATT.html#a3">00104</a> <span class="keywordtype">void</span> <a class="code" href="classPATT.html#a3">PATT::InitPattern</a>(){
00105 
00106 
00107   <span class="keywordtype">int</span> k;
00108   integer ordermiss[maxlay]={0,0,0,0,0,0,0,0};
00109   integer vmiss[maxlay]={0,0,0,0,0,0,0,0};
00110   integer vorder[maxlay]={1,2,3,4,5,6,7,8};
00111   <span class="keywordtype">int</span> minc;
00112   <span class="keywordtype">int</span> iq=0;
00113   <span class="keywordflow">for</span>(minc=0;minc&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2;minc+=2){
00114     ordermiss[iq]=TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1-minc;
00115     ordermiss[iq+TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()/2-1]=TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2-minc;
00116     iq++;
00117   }
00118   ordermiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2]=TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();
00119   ordermiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1]=1;
00120 <span class="preprocessor">#ifdef __AMSDEBUG__</span>
00121 <span class="preprocessor"></span>  <span class="keywordflow">for</span>(minc=0;minc&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();minc++)cout &lt;&lt;<span class="stringliteral">"ordermiss["</span>&lt;&lt;minc&lt;&lt;<span class="stringliteral">"] "</span>&lt;&lt;ordermiss[minc]&lt;&lt;endl;
00122 <span class="preprocessor">#endif</span>
00123 <span class="preprocessor"></span>  <span class="comment">//initialize patterns</span>
00124   <span class="keywordflow">for</span>(minc=TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();minc&gt;2;minc--){
00125     <a class="code" href="classPATT.html#s0">_Npat</a>+=<a class="code" href="classPATT.html#d0">factorial</a>(TkDBc::Head-&gt;nlay())/<a class="code" href="classPATT.html#d0">factorial</a>(minc)/<a class="code" href="classPATT.html#d0">factorial</a>(TkDBc::Head-&gt;nlay()-minc);
00126     <a class="code" href="classPATT.html#s4">_patd</a>[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-minc+1]=_Npat;
00127   }
00128   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> nl=0;nl&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();nl++){
00129     <a class="code" href="classPATT.html#s3">_patmiss</a>[nl]=<span class="keyword">new</span> integer[_Npat];
00130     <a class="code" href="classPATT.html#s1">_patconf</a>[nl]=<span class="keyword">new</span> integer[_Npat];
00131   }   
00132   <a class="code" href="classPATT.html#s2">_patpoints</a> =<span class="keyword">new</span> integer[_Npat];
00133   <a class="code" href="classPATT.html#s5">_patallow</a> =<span class="keyword">new</span> integer[_Npat];
00134   <a class="code" href="classPATT.html#s6">_patallow2</a> =<span class="keyword">new</span> integer[_Npat];
00135   <span class="keywordtype">int</span> cpat=0;
00136   <span class="keywordflow">for</span> (cpat=0;cpat&lt;<a class="code" href="classPATT.html#e8">npat</a>();cpat++){
00137     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> npt=1;npt&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();npt++){
00138       <span class="keywordflow">if</span>(cpat&lt;<a class="code" href="classPATT.html#s4">_patd</a>[npt]){
00139         <a class="code" href="classPATT.html#s2">_patpoints</a>[cpat]=TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-npt+1;
00140         <span class="keywordtype">int</span> vmini=cpat-<a class="code" href="classPATT.html#s4">_patd</a>[npt-1];
00141         <span class="keywordtype">int</span> count=0;
00142         <span class="keywordtype">int</span> v,i1,i2,i3,i4;
00143         <span class="keywordflow">for</span>(v=0;v&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();v++)vmiss[v]=0;
00144         <span class="keywordflow">switch</span>(npt-1){
00145         <span class="keywordflow">case</span> 0:
00146           <span class="keywordflow">break</span>;
00147         <span class="keywordflow">case</span> 1:        
00148           <span class="keywordflow">for</span>(i1=0;i1&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i1++){
00149             <span class="keywordflow">if</span>(vmini==count){
00150               vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1]=ordermiss[i1];
00151             }
00152             count++;
00153           }            
00154           <span class="keywordflow">break</span>;
00155         <span class="keywordflow">case</span> 2:        
00156           <span class="keywordflow">for</span>(i1=0;i1&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i1++){
00157             <span class="keywordflow">for</span>(i2=i1+1;i2&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i2++){
00158               <span class="keywordflow">if</span>(vmini==count){
00159                 vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1]=ordermiss[i2];
00160                 vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2]=ordermiss[i1];
00161               }
00162               count++;
00163             }
00164           }            
00165           <span class="keywordflow">break</span>;
00166         <span class="keywordflow">case</span> 3:        
00167           <span class="keywordflow">for</span>(i1=0;i1&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i1++){
00168             <span class="keywordflow">for</span>(i2=i1+1;i2&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i2++){
00169               <span class="keywordflow">for</span>(i3=i2+1;i3&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i3++){
00170                 <span class="keywordflow">if</span>(vmini==count){
00171                   vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1]=ordermiss[i3];
00172                   vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2]=ordermiss[i2];
00173                   vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-3]=ordermiss[i1];
00174                 }
00175                 count++;
00176               }            
00177             } 
00178           }
00179           <span class="keywordflow">break</span>;
00180         <span class="keywordflow">case</span> 4:        
00181           <span class="keywordflow">for</span>(i1=0;i1&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i1++){
00182             <span class="keywordflow">for</span>(i2=i1+1;i2&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i2++){
00183               <span class="keywordflow">for</span>(i3=i2+1;i3&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i3++){
00184                 <span class="keywordflow">for</span>(i4=i3+1;i4&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i4++){
00185                   <span class="keywordflow">if</span>(vmini==count){
00186                     vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1]=ordermiss[i4];
00187                     vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2]=ordermiss[i3];
00188                     vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-3]=ordermiss[i2];
00189                     vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-4]=ordermiss[i1];
00190                   }
00191                   count++;
00192                 }            
00193               } 
00194             }
00195           }
00196           <span class="keywordflow">break</span>;
00197         <span class="keywordflow">case</span> 5:        
00198           <span class="keywordflow">for</span>(i1=0;i1&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i1++){
00199             <span class="keywordflow">for</span>(i2=i1+1;i2&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i2++){
00200               <span class="keywordflow">for</span>(i3=i2+1;i3&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i3++){
00201                 <span class="keywordflow">for</span>(i4=i3+1;i4&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i4++){
00202                   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i5=i4+1;i5&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();i5++){
00203                     <span class="keywordflow">if</span>(vmini==count){
00204                       vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-1]=ordermiss[i5];
00205                       vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-2]=ordermiss[i4];
00206                       vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-3]=ordermiss[i3];
00207                       vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-4]=ordermiss[i2];
00208                       vmiss[TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()-5]=ordermiss[i1];
00209                     }
00210                     count++;
00211                   }            
00212                 } 
00213               }
00214             }
00215           }
00216           <span class="keywordflow">break</span>;
00217         <span class="keywordflow">default</span>:
00218           cerr&lt;&lt;<span class="stringliteral">"TKDBc::init-F-PatternLogicError"</span>&lt;&lt;endl;
00219           exit(1);
00220         }
00221         <span class="keywordflow">for</span>(v=0;v&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();v++)<a class="code" href="classPATT.html#s3">_patmiss</a>[v][cpat]=vmiss[v];
00222         <span class="keywordflow">for</span>(v=0;v&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();v++)<a class="code" href="classPATT.html#s1">_patconf</a>[v][cpat]=0;
00223         <span class="keywordtype">int</span> av=0; 
00224         <span class="keywordflow">for</span>(v=0;v&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();v++){
00225           <a class="code" href="classPATT.html#s1">_patconf</a>[av][cpat]=v+1;
00226           <span class="keywordflow">for</span>(<span class="keywordtype">int</span> vv=1;vv&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>()+1;vv++){
00227             <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s3">_patmiss</a>[vv-1][cpat]==v+1){
00228               <a class="code" href="classPATT.html#s1">_patconf</a>[av][cpat]=0;
00229               av--;
00230               <span class="keywordflow">break</span>;
00231             } 
00232           }
00233           av++;
00234         }
00235         <span class="keywordflow">break</span>;
00236       }
00237     }
00238   }
00239 <span class="preprocessor">#ifdef __AMSDEBUG__</span>
00240 <span class="preprocessor"></span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cpat=0;cpat&lt;<a class="code" href="classPATT.html#e8">npat</a>();cpat++){
00241     cout &lt;&lt;<span class="stringliteral">" cpat "</span>&lt;&lt;cpat&lt;&lt;<span class="stringliteral">" "</span>&lt;&lt;<a class="code" href="classPATT.html#s2">_patpoints</a>[cpat]&lt;&lt;endl;
00242     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();k++)cout &lt;&lt;<span class="stringliteral">" "</span> &lt;&lt;<a class="code" href="classPATT.html#s1">_patconf</a>[k][cpat];       
00243     cout &lt;&lt;endl;
00244     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>();k++)cout &lt;&lt;<span class="stringliteral">" "</span> &lt;&lt;<a class="code" href="classPATT.html#s3">_patmiss</a>[k][cpat];       
00245     cout &lt;&lt;endl;
00246   }
00247 <span class="preprocessor">#endif</span>
00248 <span class="preprocessor"></span>
00249 }
00250 
00251 
<a name="l00252"></a><a class="code" href="classPATT.html#d0">00252</a> uinteger <a class="code" href="classPATT.html#d0">PATT::factorial</a>(uinteger n){
00253   <span class="keywordflow">if</span>(n&gt;0)<span class="keywordflow">return</span> n*<a class="code" href="classPATT.html#d0">factorial</a>(n-1);
00254   <span class="keywordflow">else</span> <span class="keywordflow">return</span> 1;
00255 }
00256 
00257 
<a name="l00258"></a><a class="code" href="classPATT.html#e6">00258</a> integer <a class="code" href="classPATT.html#e6">PATT::ambig</a>(uinteger pat){
00259  <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="classPATT.html#e7">patpoints</a>(pat);i++){
00260    <span class="keywordflow">if</span>(<a class="code" href="classPATT.html#s1">_patconf</a>[i][pat]==1 || <a class="code" href="classPATT.html#s1">_patconf</a>[i][pat]==TkDBc::Head-&gt;<a class="code" href="classTkDBc.html#a3">nlay</a>())<span class="keywordflow">return</span> 0;
00261  }
00262  <span class="keywordflow">return</span> 1;
00263 }
00264 
00265 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Nov 18 18:21:01 2008 for  AMS Software: Geometry Classes by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
