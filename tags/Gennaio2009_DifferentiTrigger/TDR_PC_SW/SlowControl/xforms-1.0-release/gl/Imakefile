#define DoNormalLib YES
#define DoSharedLib BuildShared

#define LibName formsGL

SRCS		= \
		  glcanvas.c

HDRSRC		= 
HEADERS		= glcanvas.h
LIBNAME		= LibName
XFORMSLIBREV	= XFormsLibRev
#if InstallNonstandard
XFORMSLIBDIR	= XFormsNonstandardInstallDir
#else
XFORMSLIBDIR	= $(DESTDIR)$(INCDIR)/X11
#endif

#		Beach Closed!  Do Not Enter!

#if Debug
OPTFLAG	=
#else
OPTFLAG	= -O3 
#endif

OBJS	= $(SRCS:.c=.o)

#if HaveStrerror
HAVE_STRERROR	= -DHAVE_STRERROR
#endif

#if defined( PpcDarwinArchitecture )
SHLIBLDFLAGS	+= -lSystem -lcc_dynamic
#endif

#if Solaris64Bit
LDPRELIB	= -L/usr/openwin/lib/sparcv9 -L/usr/local/lib/sparcv9
CCENVSETUP	= LD_RUN_PATH=/usr/openwin/lib/sparcv9
LD		= gcc
SHLIBLDFLAGS	= -shared
#endif

REQUIREDLIBS	= \
		  $(LDPRELIB) \
		  $(XLIB) \
		  -L/usr/local/lib \
		  -L../lib -lforms \
		  -lGL \
		  $(LGCC)

EXTRA_INCLUDES	= \
		  -I$(BUILDINCDIR) \
		  -I$(TOP)/lib \
		  -I$(TOP)/lib/private \
		  -I.

DEPEND_DEFINES	= \
		  -I/usr/local/include

EXTRA_DEFINES	= \
		  -DMAKING_FORMS \
		  $(HAVE_STRERROR)

PICFLAGS	= -fPIC

CDEBUGFLAGS     = -g
CCOPTIONS	=

#if (ProjectX < 5)
    STD_DEFINES = LibraryDefines
    CDEBUGFLAGS = LibraryCDebugFlags
#else
#define SoRev XFORMSLIBREV
#define IncSubdir X11
#include <Library.tmpl>
#endif

#if InstallNonstandard
SHLIBDIR	= XFormsNonstandardInstallDir/lib
USRLIBDIR	= XFormsNonstandardInstallDir/lib
INCDIR		= XFormsNonstandardInstallDir/include
#endif

#if (ProjectX < 6)
   INSTALLFLAGS = $(INSTINCFLAGS)

#if (ProjectX < 5)

#if DoSharedLib
SharedLibraryObjectRule()
NormalSharedLibraryTarget($(LIBNAME),$(XFORMSLIBREV),$(OBJS))
InstallSharedLibrary($(LIBNAME),$(XFORMSLIBREV),$(XFORMSLIBDIR))
#else
NormalLibraryObjectRule()
#endif
NormalLibraryTarget($(LIBNAME),$(OBJS))
InstallLibrary($(LIBNAME),$(XFORMSLIBDIR))

#else /* (ProjectX < 5) */
LibraryObjectRule()

#if DoSharedLib
# if DoNormalLib
SharedLibraryTarget($(LIBNAME),$(XFORMSLIBREV),$(OBJS),shared,..)
# else
SharedLibraryTarget($(LIBNAME),$(XFORMSLIBREV),$(OBJS),.,.)
#endif
InstallSharedLibrary($(LIBNAME),$(XFORMSLIBREV),$(XFORMSLIBDIR))
#endif
#if DoNormalLib
NormalLibraryTarget($(LIBNAME),$(OBJS))
InstallLibrary($(LIBNAME),$(XFORMSLIBDIR))
#endif

#endif /* (ProjectX < 5) */

LintLibraryTarget($(LIBNAME),$(SRCS))
InstallLintLibrary($(LIBNAME),$(LINTLIBDIR))
NormalLintTarget($(SRCS))

#endif /* (ProjectX < 6) */

DependTarget()
