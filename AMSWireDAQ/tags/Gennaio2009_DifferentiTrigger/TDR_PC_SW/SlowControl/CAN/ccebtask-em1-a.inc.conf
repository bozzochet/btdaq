// file ccebtask-em1-a.inc.conf
//
// Config file prototype for USCM task to control CC according to AMS-552-SPEC-002 Rev C
//
// A.Lebedev - Apr 2007...
//

CC::     // USCM CCEB TASK Configuration

//

CCEB_MODEL 0   // select CCEB model: 0(EM1), 1(EM2), 2(QM), 3(FM)

OSCILLATOR 1    // select oscillator H(0) or C(1)

//------------------------0----1----2----3
CCIF                      0    1    0    1   // select CCIF interface A(0) or B(1)
FEED                      0    1    0    1   // select feed A(0) or B(1) for PA

// Which "Failures" to react (chk=1) or to ignore (chk=0)
// What are limits for forced shutdowns (lim=0 - no limit)
//
//--------------------------___0___--___1___--___2___--___3___
//--------------------------chk-lim--chk-lim--chk-lim--chk-lim
FAILED_OSCILLATOR             1   2    1   2    1   2    1   2
FAILED_TO_POWER_ON_CCIF       1   5    1   2    1   2    1   2
FAILED_TO_ACTIVATE_RELAYS     1   2    1   2    1   2    1   2
FAILED_TO_CHECK_RELAY_STATUS  1   2    1   2    1   2    1   2
FAILED_TO_DEACTIVATE_RELAYS   1   2    1   2    1   2    1   2
FAILED_TO_SETUP_RELAYS        1   2    1   2    1   2    1   2
FAILED_TO_POWER_ON_PA         1   2    1   2    1   2    1   2
FAILED_TO_START_PA            1   2    1   2    1   2    1   2
FAILED_TO_CHECK_PA            1   2    1   2    1   2    1   2
FAILED_TO_STOP_PA             1   2    1   2    1   2    1   2
FAILED_PA_POWER               1   2    1   2    1   2    1   2
FAILED_TO_SET_PHASE           1   2    1   2    1   2    1   2
 
// Which "Alarms" to react (chk=1) or to ignore (chk=0)
// What are limits for forced shutdowns (lim=0 - no limit)
//
//------------------------0---__---1---__---2---__---3---
//---------------------chk-lim--chk-lim--chk-lim--chk-lim
ALARM_REJECT_T_LOW       1   3    1   3    1   0    1   0
ALARM_REJECT_T_HIGH      1   3    1   3    1   0    1   0
ALARM_REJECT_T_TIMEOUT   1   3    1   3    1   0    1   0
ALARM_CASE_T_LOW         1   3    1   3    1   0    1   0
ALARM_CASE_T_HIGH        1   3    1   3    1   0    1   0
ALARM_CASE_T_TIMEOUT     1   3    1   3    1   0    1   0
ALARM_P_BUS_LOW          1   3    1   3    1   0    1   0
ALARM_P_BUS_HIGH         1   3    1   3    1   0    1   0
ALARM_V_RMS_LOW          1   3    1   3    1   0    1   0
ALARM_V_RMS_HIGH         1   3    1   3    1   0    1   0
ALARM_I_RMS_LOW          1   3    1   3    1   0    1   0
ALARM_I_RMS_HIGH         1   3    1   3    1   0    1   0
ALARM_Z_RMS_LOW          1   3    1   3    1   0    1   0
ALARM_Z_RMS_HIGH         1   1    1   1    1   1    1   1
ALARM_POWER_LOW          1   3    1   3    1   0    1   0
ALARM_POWER_HIGH         1   3    1   3    1   0    1   0

//------------------------0----1----2----3
PHASE_MIN_VALUE          52   56   54   53   // adjusted by GSFC folks for P_BUS=30W @ V_INP=120V
PHASE_MAX_VALUE         150  150  150  150   // nobody understands this
PHASE_START_UP_VALUE     57   57   57   53   // adjusted by GSFC folks for V_RMS=57V @ V_INP=120V
PHASE_TARGET_VALUE        0    0    0    0   // used if >0 for manual running
PHASE_SHUT_DOWN_VALUE     0    0    0    0   // used if >0 for manual shutdown
POWER_TARGET_VALUE      100  100  100  100   // for automatic running
V_RMS_SHUT_DOWN_VALUE    37   37   37   37   // for automatic shutdown  ====>>>  change to POWER_SHUT_DOWN_VALUE

// DALLAS sensors (to switch on/off cryocoolers and to set max power)
//
//-------------------------0-----1-----2-----3
REJECT_T_PROBATION       360   360   360   360   // in sec
REJECT_T_MIN_VALUE       -20   -20   -20   -20   // in degree C
REJECT_T_MIN_PROBATION    60    60    60    60   // in sec
REJECT_T_MAX_VALUE        40    40    40    40   // in degree C
REJECT_T_MAX_PROBATION    60    60    60    60   // in sec

//-------------------------0-----1-----2-----3
CASE_T_PROBATION         360   360   360   360   // in sec
CASE_T_MIN_VALUE         -20   -20   -20   -20   // in degree C
CASE_T_MIN_PROBATION      60    60    60    60   // in sec
CASE_T_MAX_VALUE          60    60    60    60   // in degree C
CASE_T_MAX_PROBATION      60    60    60    60   // in sec

//-------------------------0-----1-----2-----3
REJECT_T_USE               1     1     1     1   // if not used then do not change P_max
CASE_T_USE                 1     1     1     1   // if not used then do not change P_max

//----------------Nb---From----To--P_max
DALLAS_T_TABLE     0    -40   -10    130
DALLAS_T_TABLE     1    -10     0    140

// CERNOX sensors (to set max power)
// (temperatures should be converted into CERNOX ADC readings)
//
//-------------------------0------1------2------3
COLD_TIP_T_SENSOR_ID  X48012 X47959 X47967 X48007 
VCS_T_SENSOR_ID       X47975 X47926 X47934 X47932 

//---------------------0----1----2----3
COLD_TIP_T_USE         1    1    1    1     // if not used then do not change P_max
VCS_T_USE              1    1    1    1     // if not used then do not change P_max

//---------------------Cold_tip_t-----VCS_t---------
//----------------Nb---From----To--From----To--P_max
CERNOX_T_TABLE     0    100   170   100   170     95   // in degree K
CERNOX_T_TABLE     1    170   250   170   250     65   // in degree K
CERNOX_T_TABLE     2    250   999   250   999     45   // in degree K

// power
//
//---------------------0-----1-----2-----3
POWER_MIN_VALUE       40    40    40    40  // absolute limit
POWER_MIN_PROBATION   10    10    10    10  // in sec
POWER_MAX_VALUE      150   150   150   150  // absolute limit
POWER_MAX_PROBATION   10    10    10    10  // in sec

// P_BUS
//
//---------------------0-----1-----2-----3
P_BUS_MIN_VALUE       60    60    60    60  // 
P_BUS_MIN_PROBATION 3600  3600  3600  3600  // in sec (allow for non-steady state)
P_BUS_MAX_VALUE      150   150   150   150  // adjustable limit, depends on temperature
P_BUS_MAX_PROBATION   60    60    60    60  // in sec

// V_RMS
//
//---------------------0-----1-----2-----3
V_RMS_MIN_VALUE       47    47    47    47
V_RMS_MIN_PROBATION 3600  3600  3600  3600  // in sec
V_RMS_MAX_VALUE       95    95    95    95
V_RMS_MAX_PROBATION   60    60    60    60  // in sec

// I_RMS
//
//---------------------0-----1-----2-----3
I_RMS_MIN_VALUE     1200  1200  1200  1200  // in mA
I_RMS_MIN_PROBATION 3600  3600  3600  3600  // in sec
I_RMS_MAX_VALUE     2900  2900  2900  2900  // in mA   // set during tests at GSFC
I_RMS_MAX_PROBATION   60    60    60    60  // in sec

// Z_RMS
//
//---------------------0-----1-----2-----3
Z_RMS_MIN_VALUE       25    25    25    25
Z_RMS_MIN_PROBATION 3600  3600  3600  3600  // in sec
Z_RMS_MAX_VALUE       70    70    70    70
Z_RMS_MAX_PROBATION   60    60    60    60  // in sec

// End-Of-File
