#
# make for fd2eps
#

include ../mkconfig.h

CFLAGS=$(CCFLAG) -I../FORMS -I../FORMS/private $(XINCLUDE) 
LDFLAGS=$(LDFLAG)
#LIBS=-L../FORMS -lforms $(SYSLIB)
LIBS=-lm

OBJS=fd2ps.o psdraw.o pscol.o pstext.o load.o psobj.o flsupport.o\
     version.o sys.o align.o xbmtops.o  xpmtops.o papers.o readxpm.o \
     image2ps.o

SRC=$(OBJS:.o=.c) global.h sys.h fd2ps.h

fd2ps:$(OBJS) 
	$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)

clean:;-/bin/rm -f $(OBJS) core a.out;/bin/rm -f *~;(cd test; /bin/rm -f *ps *bak)
empty:clean; -/bin/rm -f *log *ps *fd update *.bak; (cd test; /bin/rm -f *.c *.h )
IFLAG=-fca -nfc1 -bli0 -i4 -npcs -ss -Tci_t -TSPEC
sfmt: ; indent $(IFLAG) $(SRC)

version=0.36
state=beta
CIFLAG=-f
update: $(SRC) Makefile fd2ps.1 Change
	ci $(CIFLAG) -u$(version) -s$(state) $?
#	rcs -i -azhao -U $?
	echo $$version > update

tar:clean
	tar cvf - $(SRC) fd2ps.1 test Makefile Change | gzip -9 > ../fd2ps.tgz
