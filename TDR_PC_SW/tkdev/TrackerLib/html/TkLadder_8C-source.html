<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title> AMS Software: Geometry Classes: CC/TkLadder.C Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">CC</a></div>
<h1>TkLadder.C</h1><a href="TkLadder_8C.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">//  $Id: TkLadder.C,v 1.10 2008/10/23 10:12:39 zuccon Exp $</span>
00002 
00019 
00020 <span class="preprocessor">#include "<a class="code" href="TkLadder_8h.html">TkLadder.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="TkDBc_8h.html">TkDBc.h</a>"</span>
00022 
00023 
00024    <span class="comment">//                   0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23</span>
<a name="l00025"></a><a class="code" href="classTkLadder.html#t0">00025</a> <span class="keywordtype">int</span> <a class="code" href="classTkLadder.html#t0">TkLadder::pwg</a>[24]= {1,1,4,4,1,1,4,4,1,1, 4, 4, 2, 2, 3, 3, 2, 2, 3, 3, 2, 2, 3, 3};
00026    <span class="comment">//                   0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23</span>
<a name="l00027"></a><a class="code" href="classTkLadder.html#t1">00027</a> <span class="keywordtype">int</span> <a class="code" href="classTkLadder.html#t1">TkLadder::pwgp</a>[24]={1,2,5,6,3,4,3,4,5,6, 1, 2, 1, 2, 5, 6, 3, 4, 3, 4, 5, 6, 1, 2};
00028 
<a name="l00029"></a><a class="code" href="classTkLadder.html#a0">00029</a> <a class="code" href="classTkLadder.html#a0">TkLadder::TkLadder</a>():<a class="code" href="classTkObject.html">TkObject</a>()
00030 {
00031   <a class="code" href="classTkLadder.html#o0">_layer</a>=0;
00032   <a class="code" href="classTkLadder.html#o1">_slot</a>=0;
00033   <a class="code" href="classTkLadder.html#o2">_crate</a>=0;
00034   <a class="code" href="classTkLadder.html#o3">_tdr</a>=0;
00035   <a class="code" href="classTkLadder.html#o4">_nsensors</a>=0;
00036   <a class="code" href="classTkLadder.html#o6">_plane</a>=NULL;
00037   <a class="code" href="classTkLadder.html#o5">_laser_align</a>=0;
00038 }
00039 
<a name="l00040"></a><a class="code" href="classTkLadder.html#a1">00040</a> <a class="code" href="classTkLadder.html#a0">TkLadder::TkLadder</a>(<a class="code" href="classTkPlane.html">TkPlane</a>* plane,<span class="keywordtype">char</span>* name,<span class="keywordtype">int</span> layer,<span class="keywordtype">int</span> slot,<span class="keywordtype">int</span> crate,<span class="keywordtype">int</span> tdr, <span class="keywordtype">int</span> nsensors):<a class="code" href="classTkObject.html">TkObject</a>(name)
00041 {
00042   <a class="code" href="classTkLadder.html#o0">_layer</a>=layer;
00043   <a class="code" href="classTkLadder.html#o1">_slot</a>=slot;
00044   <a class="code" href="classTkLadder.html#o2">_crate</a>=crate;
00045   <a class="code" href="classTkLadder.html#o3">_tdr</a>=tdr;
00046   <a class="code" href="classTkLadder.html#o4">_nsensors</a>=nsensors;
00047   <a class="code" href="classTkLadder.html#o6">_plane</a>=plane;
00048   <a class="code" href="classTkLadder.html#o5">_laser_align</a>=0;
00049 }
00050 
<a name="l00051"></a><a class="code" href="classTkLadder.html#a2">00051</a> <a class="code" href="classTkLadder.html#a0">TkLadder::TkLadder</a>(<a class="code" href="classTkPlane.html">TkPlane</a>* plane,<span class="keywordtype">char</span>* name,<span class="keywordtype">int</span> Trid,<span class="keywordtype">int</span> HwId,  <span class="keywordtype">int</span> nsensors):<a class="code" href="classTkObject.html">TkObject</a>(name){
00052   <a class="code" href="classTkLadder.html#o0">_layer</a>=abs(Trid)/100;
00053   <a class="code" href="classTkLadder.html#o1">_slot</a>=abs(Trid)/Trid*(abs(Trid)-100*_layer);
00054   <a class="code" href="classTkLadder.html#o2">_crate</a>=HwId/100;
00055   <a class="code" href="classTkLadder.html#o3">_tdr</a>=HwId-<a class="code" href="classTkLadder.html#o2">_crate</a>*100;
00056   <a class="code" href="classTkLadder.html#o4">_nsensors</a>=nsensors;
00057   <a class="code" href="classTkLadder.html#o6">_plane</a>=plane;
00058   <a class="code" href="classTkLadder.html#o5">_laser_align</a>=0;
00059 }
00060 
00061 
<a name="l00062"></a><a class="code" href="classTkLadder.html#b0">00062</a> ostream&amp; <a class="code" href="classTkLadder.html#b0">TkLadder::putout</a>(ostream&amp; s){
00063 
00064     <span class="keywordflow">return</span> <a class="code" href="classTkObject.html#b0">TkObject::putout</a>(s)&lt;&lt;
00065       <a class="code" href="classTkLadder.html#a10">GetTkId</a>()&lt;&lt;<span class="stringliteral">"  "</span>&lt;&lt;
00066       <a class="code" href="classTkLadder.html#a15">GetHwId</a>()&lt;&lt;<span class="stringliteral">"  "</span>&lt;&lt;<a class="code" href="classTkLadder.html#o4">_nsensors</a>&lt;&lt;endl;
00067 
00068 }
00069 
<a name="l00070"></a><a class="code" href="classTkLadder.html#a17">00070</a> <span class="keywordtype">void</span> <a class="code" href="classTkLadder.html#a17">TkLadder::SetTkId</a>(<span class="keywordtype">int</span> Trid){
00071   <a class="code" href="classTkLadder.html#o0">_layer</a>=abs(Trid)/100;
00072   <a class="code" href="classTkLadder.html#o1">_slot</a>=abs(Trid)/Trid*(abs(Trid)-100*_layer);
00073 }
00074 
<a name="l00075"></a><a class="code" href="classTkLadder.html#a16">00075</a> <span class="keywordtype">void</span> <a class="code" href="classTkLadder.html#a16">TkLadder::SetHwId</a>(<span class="keywordtype">int</span> HwId){
00076   <a class="code" href="classTkLadder.html#o2">_crate</a>=HwId/100;
00077   <a class="code" href="classTkLadder.html#o3">_tdr</a>=HwId-<a class="code" href="classTkLadder.html#o2">_crate</a>*100;
00078 }
00079 
<a name="l00080"></a><a class="code" href="classTkLadder.html#b1">00080</a> istream&amp; <a class="code" href="classTkLadder.html#b1">TkLadder::putin</a>(istream&amp; s){
00081   <span class="keywordtype">int</span> hw,tk;
00082   <a class="code" href="classTkObject.html#b2">TkObject::putin</a>(s);
00083   <span class="keywordflow">if</span>(s.eof()) <span class="keywordflow">return</span> s;
00084   <span class="keywordflow">if</span>(!s.good()){
00085     cerr&lt;&lt; <span class="stringliteral">"Error TkLadder::putin the channel is not good before"</span>&lt;&lt;endl;
00086   }
00087   s&gt;&gt;tk&gt;&gt;hw&gt;&gt;_nsensors;
00088   <span class="keywordflow">if</span>(!s.good()){
00089     cerr&lt;&lt; <span class="stringliteral">"Error TkLadder::putin the channel is not good  after"</span>&lt;&lt;endl;
00090   }
00091   <a class="code" href="classTkLadder.html#a17">SetTkId</a>(tk);
00092   <a class="code" href="classTkLadder.html#a16">SetHwId</a>(hw);
00093   
00094   <span class="keywordflow">return</span> s;
00095 
00096 }
00097 
00098 
<a name="l00099"></a><a class="code" href="classTkLadder.html#a7">00099</a> <span class="keywordtype">int</span> <a class="code" href="classTkLadder.html#a7">TkLadder::GetOctant</a>(){
00100   
00101   <span class="keywordtype">int</span> aa=<a class="code" href="classTkLadder.html#a6">GetSide</a>();
00102 
00103   <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;1||abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;15||aa&gt;1||aa&lt;0) <span class="keywordflow">return</span> -9999;
00104 
00105   <span class="keywordflow">if</span>(<a class="code" href="classTkLadder.html#o0">_layer</a>==1){
00106     <span class="keywordflow">if</span>(aa==0){
00107       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;=7) <span class="keywordflow">return</span> 4;
00108       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>) &lt;7) <span class="keywordflow">return</span> 2;
00109     } 
00110     <span class="keywordflow">else</span> {
00111       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;=9) <span class="keywordflow">return</span> 1;
00112       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>) &gt;9) <span class="keywordflow">return</span> 3;
00113     }
00114   }
00115 
00116   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classTkLadder.html#o0">_layer</a>==8){
00117     <span class="keywordflow">if</span>(aa==0){
00118       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;=7) <span class="keywordflow">return</span> 8;
00119       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>) &lt;7) <span class="keywordflow">return</span> 6;
00120     } 
00121     <span class="keywordflow">else</span> {
00122       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;=9) <span class="keywordflow">return</span> 5;
00123       <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>) &gt;9) <span class="keywordflow">return</span> 7;
00124     }
00125   }
00126   
00127   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classTkLadder.html#o0">_layer</a>==2 ||<a class="code" href="classTkLadder.html#o0">_layer</a>==3 ||<a class="code" href="classTkLadder.html#o0">_layer</a>==4){
00128     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)==8)  <span class="keywordflow">return</span> -9999;
00129 
00130     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;=7 &amp;&amp; aa==0) <span class="keywordflow">return</span> 2;  
00131     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;=9 &amp;&amp; aa==0) <span class="keywordflow">return</span> 4;
00132     
00133     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;=9 &amp;&amp; aa==1) <span class="keywordflow">return</span> 3;
00134     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;=7 &amp;&amp; aa==1) <span class="keywordflow">return</span> 1; 
00135   }
00136 
00137   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classTkLadder.html#o0">_layer</a>==5 ||<a class="code" href="classTkLadder.html#o0">_layer</a>==6 ||<a class="code" href="classTkLadder.html#o0">_layer</a>==7){
00138     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)==8)  <span class="keywordflow">return</span> -9999;
00139   
00140     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;=9 &amp;&amp; aa==0) <span class="keywordflow">return</span> 8; 
00141     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;=7 &amp;&amp; aa==0) <span class="keywordflow">return</span> 6; 
00142     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&gt;=9 &amp;&amp; aa==1) <span class="keywordflow">return</span> 7;
00143     <span class="keywordflow">if</span>(abs(<a class="code" href="classTkLadder.html#o1">_slot</a>)&lt;=7 &amp;&amp; aa==1) <span class="keywordflow">return</span> 5; 
00144   }
00145   
00146   <span class="keywordflow">return</span> -9999;
00147 
00148 
00149 }
00150 
00151 
00152 
00153 
<a name="l00154"></a><a class="code" href="classTkLadder.html#b3">00154</a> istream&amp; <a class="code" href="classTkLadder.html#b3">TkLadder::putinA</a>(istream&amp; s){
00155   <span class="keywordtype">int</span> hw,tk;
00156   <a class="code" href="classTkObject.html#b3">TkObject::putinA</a>(s);
00157   <span class="keywordflow">if</span>(s.eof()) <span class="keywordflow">return</span> s;
00158   <span class="keywordflow">if</span>(!s.good()){
00159     cerr&lt;&lt; <span class="stringliteral">"Error TkLadder::putin the channel is not good before"</span>&lt;&lt;endl;
00160   }
00161   s&gt;&gt;tk&gt;&gt;hw&gt;&gt;_nsensors;
00162   <span class="keywordflow">if</span>(!s.good()){
00163     cerr&lt;&lt; <span class="stringliteral">"Error TkLadder::putin the channel is not good  after"</span>&lt;&lt;endl;
00164   }
00165   
00166   <span class="keywordflow">return</span> s;
00167 
00168 }
00169 
00170 
<a name="l00171"></a><a class="code" href="classTkLadder.html#b2">00171</a> ostream&amp; <a class="code" href="classTkLadder.html#b2">TkLadder::putoutA</a>(ostream&amp; s){
00172 
00173     <span class="keywordflow">return</span> <a class="code" href="classTkObject.html#b1">TkObject::putoutA</a>(s)&lt;&lt;
00174       <a class="code" href="classTkLadder.html#a10">GetTkId</a>()&lt;&lt;<span class="stringliteral">"  "</span>&lt;&lt;
00175       <a class="code" href="classTkLadder.html#a15">GetHwId</a>()&lt;&lt;<span class="stringliteral">"  "</span>&lt;&lt;<a class="code" href="classTkLadder.html#o4">_nsensors</a>&lt;&lt;endl;
00176 
00177 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Nov 18 18:21:03 2008 for  AMS Software: Geometry Classes by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
