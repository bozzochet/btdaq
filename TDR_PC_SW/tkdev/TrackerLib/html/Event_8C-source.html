<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title> AMS Software: Geometry Classes: CC/Event.C Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">CC</a></div>
<h1>Event.C</h1><a href="Event_8C.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#include "<a class="code" href="Event_8h.html">Event.h</a>"</span>
00002 
00003 <a class="code" href="TrTrack_8C.html#a0">ClassImp</a>(<a class="code" href="classEvent.html">Event</a>);
<a name="l00004"></a><a class="code" href="classEvent.html#s0">00004</a> <a class="code" href="classEvent.html">Event</a>* <a class="code" href="classEvent.html#s0">Event::currev</a>=0;
00005 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00006 
<a name="l00007"></a><a class="code" href="classEvent.html#a0">00007</a> <a class="code" href="classEvent.html#a0">Event::Event</a>():TObject(){
00008   <a class="code" href="classEvent.html#a3">Clear</a>();
00009   <a class="code" href="classEvent.html#o14">fTrMCClusters</a>.reserve(20);
00010   <a class="code" href="classEvent.html#o18">fTrClusters</a>.reserve(20);
00011   <a class="code" href="classEvent.html#o16">fTrRawClusters</a>.reserve(20);
00012   <a class="code" href="classEvent.html#o20">fTrRecHits</a>.reserve(20);
00013   <a class="code" href="classEvent.html#o22">fTrTracks</a>.reserve(20);
00014   <a class="code" href="classEvent.html#s0">currev</a>=<span class="keyword">this</span>;
00015 }
00016 
<a name="l00017"></a><a class="code" href="classEvent.html#a1">00017</a> <a class="code" href="classEvent.html#a0">Event::Event</a>(<a class="code" href="classEvent.html">Event</a>&amp; orig):TObject(orig) {
00018   <a class="code" href="classEvent.html#o0">runnum</a>          = orig.<a class="code" href="classEvent.html#o0">runnum</a>;
00019   <a class="code" href="classEvent.html#o1">runtag</a>          = orig.<a class="code" href="classEvent.html#o1">runtag</a>;
00020   <a class="code" href="classEvent.html#o2">eventnum</a>        = orig.<a class="code" href="classEvent.html#o2">eventnum</a>;
00021   <a class="code" href="classEvent.html#o3">event_time</a>      = orig.<a class="code" href="classEvent.html#o3">event_time</a>;
00022   <a class="code" href="classEvent.html#o4">event_ftime</a>     = orig.<a class="code" href="classEvent.html#o4">event_ftime</a>;
00023   <a class="code" href="classEvent.html#o5">event_fftime</a>    = orig.<a class="code" href="classEvent.html#o5">event_fftime</a>;
00024   <a class="code" href="classEvent.html#o8">event_timeP</a>     = orig.<a class="code" href="classEvent.html#o8">event_timeP</a>;
00025   <a class="code" href="classEvent.html#o7">event_ftimeP</a>    = orig.<a class="code" href="classEvent.html#o7">event_ftimeP</a>;
00026   <a class="code" href="classEvent.html#o9">event_fftimeP</a>    = orig.<a class="code" href="classEvent.html#o9">event_fftimeP</a>;
00027   <a class="code" href="classEvent.html#o6">event_size</a>      = orig.<a class="code" href="classEvent.html#o6">event_size</a>;
00028   <a class="code" href="classEvent.html#o15">NTrRawClusters</a>  = orig.<a class="code" href="classEvent.html#o15">NTrRawClusters</a>;
00029   <a class="code" href="classEvent.html#o16">fTrRawClusters</a>  = orig.<a class="code" href="classEvent.html#o16">fTrRawClusters</a>;
00030   <a class="code" href="classEvent.html#o13">NTrMCClusters</a>     = orig.<a class="code" href="classEvent.html#o13">NTrMCClusters</a>;
00031   <a class="code" href="classEvent.html#o17">NTrClusters</a>     = orig.<a class="code" href="classEvent.html#o17">NTrClusters</a>;
00032   <a class="code" href="classEvent.html#o18">fTrClusters</a>     = orig.<a class="code" href="classEvent.html#o18">fTrClusters</a>;
00033   <a class="code" href="classEvent.html#o19">NTrRecHits</a>      = orig.<a class="code" href="classEvent.html#o19">NTrRecHits</a>;
00034   <a class="code" href="classEvent.html#o20">fTrRecHits</a>      = orig.<a class="code" href="classEvent.html#o20">fTrRecHits</a>;
00035   <a class="code" href="classEvent.html#o21">NTrTracks</a>       = orig.<a class="code" href="classEvent.html#o21">NTrTracks</a>;
00036   <a class="code" href="classEvent.html#o22">fTrTracks</a>       = orig.<a class="code" href="classEvent.html#o22">fTrTracks</a>;
00037   <a class="code" href="classEvent.html#o10">T1</a>              = orig.<a class="code" href="classEvent.html#o10">T1</a>;
00038   <a class="code" href="classEvent.html#o11">T2</a>              = orig.<a class="code" href="classEvent.html#o11">T2</a>;
00039   <a class="code" href="classEvent.html#o12">TofFlag1</a>        = orig.<a class="code" href="classEvent.html#o12">TofFlag1</a>;
00040 }
00041 
<a name="l00042"></a><a class="code" href="classEvent.html#a3">00042</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a3">Event::Clear</a>(<span class="keywordtype">int</span> reallydelete) {
00043   <a class="code" href="classEvent.html#o0">runnum</a>       = 0;
00044   <a class="code" href="classEvent.html#o1">runtag</a>       = 0;
00045   <a class="code" href="classEvent.html#o2">eventnum</a>     = 0;
00046   <a class="code" href="classEvent.html#o3">event_time</a>   = 0;
00047   <a class="code" href="classEvent.html#o4">event_ftime</a>  = 0;
00048   <a class="code" href="classEvent.html#o5">event_fftime</a>  = 0;
00049   <a class="code" href="classEvent.html#o8">event_timeP</a>  = 0;
00050   <a class="code" href="classEvent.html#o7">event_ftimeP</a> = 0;
00051   <a class="code" href="classEvent.html#o9">event_fftimeP</a> = 0;
00052   <a class="code" href="classEvent.html#o6">event_size</a>   = 0;
00053   <a class="code" href="classEvent.html#o10">T1</a>            =0;
00054   <a class="code" href="classEvent.html#o11">T2</a>            =0;
00055   <a class="code" href="classEvent.html#o12">TofFlag1</a>      =12;
00056   <a class="code" href="classEvent.html#s0">currev</a>=<span class="keyword">this</span>;
00057   <a class="code" href="classEvent.html#a10">ClearTrMCClusters</a>(reallydelete);
00058  <a class="code" href="classEvent.html#a14">ClearTrRawClusters</a>(reallydelete);
00059  <a class="code" href="classEvent.html#a18">ClearTrClusters</a>(reallydelete);
00060  <a class="code" href="classEvent.html#a22">ClearTrRecHits</a>(reallydelete);
00061  <a class="code" href="classEvent.html#a26">ClearTrTracks</a>(reallydelete);
00062 }
00063 
<a name="l00064"></a><a class="code" href="classEvent.html#a2">00064</a> <a class="code" href="classEvent.html#a2">Event::~Event</a>(){
00065   <a class="code" href="classEvent.html#a3">Clear</a>();
00066 }
00067 
<a name="l00068"></a><a class="code" href="classEvent.html#a4">00068</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#a4">Event::Info</a>(){
00069   <span class="keywordtype">char</span> msg[1024];
00070   <a class="code" href="classEvent.html#o23">sout</a>.clear();
00071  
00072   <span class="comment">// sprintf(msg, "Run: %10d\nTag: %X\nEvent: %7d\nFineTime: %d\nTime: %s \nnRawClusters: %3d\nnClusters: %3d\nnRecHits: %3d\nnTracks: %3d\n",</span>
00073 <span class="comment">//        runnum, runtag, eventnum, event_ftime, ctime(&amp;event_time),</span>
00074 <span class="comment">//       GetnTrRawClusters(), GetnTrClusters(), GetnTrRecHits(), GetnTrTracks());</span>
00075   
00076 
00077   sprintf(msg, <span class="stringliteral">"Run: %10d\nTag: %X\nEvent: %7d\nFineTime: %d\nTime: %s \nnRawClusters: %3d\nnClusters: %3d\nnRecHits: %3d\nnTracks: %3d\n"</span>,
00078           <a class="code" href="classEvent.html#o0">runnum</a>, <a class="code" href="classEvent.html#o1">runtag</a>, <a class="code" href="classEvent.html#o2">eventnum</a>, <a class="code" href="classEvent.html#o4">event_ftime</a>, ctime(&amp;<a class="code" href="classEvent.html#o3">event_time</a>),
00079           <a class="code" href="classEvent.html#a11">GetnTrRawClusters</a>(), <a class="code" href="classEvent.html#a15">GetnTrClusters</a>(), <a class="code" href="classEvent.html#a19">GetnTrRecHits</a>(), <a class="code" href="classEvent.html#a23">GetnTrTracks</a>());
00080   
00081   <span class="keywordtype">int</span> num[8][2];
00082   <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00083   sprintf(msg,<span class="stringliteral">"Tracks:\n"</span>);  
00084   <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00085   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0;ii&lt;<a class="code" href="classEvent.html#a23">GetnTrTracks</a>();ii++)
00086     <a class="code" href="classEvent.html#a25">GetTrTrack</a>(ii)-&gt;<a class="code" href="classAMSTrTrack.html#a46">_printEl</a>(<a class="code" href="classEvent.html#o23">sout</a>);
00087   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0;ii&lt;8;ii++) {num[ii][0]=0; num[ii][1]=0;}
00088   sprintf(msg,<span class="stringliteral">"RawClusters:\n"</span>);  
00089   <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00090   <a class="code" href="classEvent.html#d2">GetNRawClusterPlaneSide</a>(num);
00091   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;8;ii++){
00092     sprintf(msg,<span class="stringliteral">"Layer %d:    S: %3d    K: %3d  \n"</span>,ii+1,num[ii][0],num[ii][1]);  
00093     <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00094   }
00095   <a class="code" href="classEvent.html#o23">sout</a>.append(<span class="stringliteral">"\n"</span>);
00096   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0;ii&lt;8;ii++) {num[ii][0]=0; num[ii][1]=0;}
00097   
00098   sprintf(msg,<span class="stringliteral">"Clusters:\n"</span>);  
00099   <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00100   <a class="code" href="classEvent.html#d0">GetNTrClusterPlaneSide</a>(num);
00101   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;8;ii++){
00102     sprintf(msg,<span class="stringliteral">"Layer %d:    S: %3d    K: %3d  \n"</span>,ii+1,num[ii][0],num[ii][1]);  
00103     <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00104   }
00105   <a class="code" href="classEvent.html#o23">sout</a>.append(<span class="stringliteral">"\n"</span>);
00106 
00107   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii=0;ii&lt;8;ii++) {num[ii][0]=0; num[ii][1]=0;}
00108   
00109   sprintf(msg,<span class="stringliteral">"RecHits:\n"</span>);  
00110   <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00111   <a class="code" href="classEvent.html#d1">GetNRecHitPlane</a>(num);
00112   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;8;ii++){
00113     sprintf(msg,<span class="stringliteral">"Layer %d:     %3d     \n"</span>,ii+1,num[ii][0]);  
00114     <a class="code" href="classEvent.html#o23">sout</a>.append(msg);
00115   }
00116   <a class="code" href="classEvent.html#o23">sout</a>.append(<span class="stringliteral">"\n"</span>);
00117 
00118    
00119   
00120 }
00121 
<a name="l00122"></a><a class="code" href="classEvent.html#a6">00122</a> <span class="keywordtype">int</span> <a class="code" href="classEvent.html#a6">Event::GetDtime</a>(){
00123   <span class="keywordflow">return</span> (<a class="code" href="classEvent.html#o3">event_time</a>-event_timeP)*1000000 + int(<a class="code" href="classEvent.html#o4">event_ftime</a>) - int(<a class="code" href="classEvent.html#o7">event_ftimeP</a>);
00124 }
00125 
00126 
<a name="l00127"></a><a class="code" href="classEvent.html#d2">00127</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#d2">Event::GetNRawClusterPlaneSide</a>(<span class="keywordtype">int</span> num[8][2]){
00128   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;<a class="code" href="classEvent.html#o16">fTrRawClusters</a>.size();ii++){
00129     <a class="code" href="classAMSTrRawCluster.html">TrRawClusterR</a>* cc=<a class="code" href="classEvent.html#o16">fTrRawClusters</a>.at(ii);
00130     num[cc-&gt;<a class="code" href="classAMSTrRawCluster.html#a9">GetLayer</a>()-1][cc-&gt;<a class="code" href="classAMSTrRawCluster.html#a12">GetSide</a>()]++; 
00131   }
00132   <span class="keywordflow">return</span>;
00133 }
00134 
00135 
00136 
<a name="l00137"></a><a class="code" href="classEvent.html#d0">00137</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#d0">Event::GetNTrClusterPlaneSide</a>(<span class="keywordtype">int</span> num[8][2]){
00138   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;<a class="code" href="classEvent.html#o18">fTrClusters</a>.size();ii++){
00139     <a class="code" href="classAMSTrCluster.html">TrClusterR</a>* cc=<a class="code" href="classEvent.html#o18">fTrClusters</a>.at(ii);
00140     num[cc-&gt;<a class="code" href="classAMSTrCluster.html#a10">GetLayer</a>()-1][cc-&gt;<a class="code" href="classAMSTrCluster.html#a12">GetSide</a>()]++; 
00141   }
00142   <span class="keywordflow">return</span>;
00143 }
00144 
<a name="l00145"></a><a class="code" href="classEvent.html#d1">00145</a> <span class="keywordtype">void</span> <a class="code" href="classEvent.html#d1">Event::GetNRecHitPlane</a>(<span class="keywordtype">int</span> num[8][2]){
00146   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0;ii&lt;<a class="code" href="classEvent.html#o20">fTrRecHits</a>.size();ii++){
00147     <a class="code" href="classAMSTrRecHit.html">TrRecHitR</a>* cc=<a class="code" href="classEvent.html#o20">fTrRecHits</a>.at(ii);
00148     num[cc-&gt;<a class="code" href="classAMSTrRecHit.html#a7">GetLayer</a>()-1][0]++; 
00149   }
00150   <span class="keywordflow">return</span>;
00151 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Nov 18 18:21:01 2008 for  AMS Software: Geometry Classes by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
